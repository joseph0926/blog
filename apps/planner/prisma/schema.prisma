generator client {
  provider = "prisma-client"
  output   = "../app/generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Capture {
  id      String      @id @default(cuid())
  content String
  context String?
  type    CaptureType @default(LEARNING_NEED)
  status  Status      @default(PENDING)

  notes LearningNote[]
  tags  Tag[]

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model LearningNote {
  id        String  @id @default(cuid())
  captureId String
  capture   Capture @relation(fields: [captureId], references: [id], onDelete: Cascade)

  title     String?
  content   String
  resources String[]

  createdAt DateTime @default(now())
}

model Tag {
  id       String    @id @default(cuid())
  name     String    @unique
  captures Capture[]
}

enum CaptureType {
  LEARNING_NEED
  IDEA
  PR
  PROJECT
}

enum Status {
  PENDING
  IN_PROGRESS
  COMPLETED
}
